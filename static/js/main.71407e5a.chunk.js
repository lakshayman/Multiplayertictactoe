(this["webpackJsonpreact-tic-tac-toe-game"]=this["webpackJsonpreact-tic-tac-toe-game"]||[]).push([[0],{106:function(t,e,n){"use strict";n.r(e);var s=n(12),a=n(13),o=n(17),i=n(16),c=n(1),r=n.n(c),l=n(54),h=n.n(l),u=n(24),j=n(2),b=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"gameScoreboard",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(s.a)(this,t),this.storageName=e,localStorage.getItem(e)||localStorage.setItem(e,n)}return Object(a.a)(t,[{key:"getData",value:function(){return JSON.parse(localStorage.getItem(this.storageName))}},{key:"update",value:function(t){localStorage.setItem(this.storageName,JSON.stringify(t))}}]),t}(),d=(n(21),n(0)),m=function(t){return Object(d.jsx)("button",{className:"board__box",onClick:t.onClick,children:t.value})},x=n(59);function p(t,e,n,s){for(var a="",o=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],i=0;i<o.length;i++){var c=Object(x.a)(o[i],3),r=c[0],l=c[1],h=c[2];console.log([r,l,h]),t[r]&&t[r]===t[l]&&t[r]===t[h]&&(a=t[r])}return""===a?null:e===a?n:s}function v(t){var e=0;return t.forEach((function(t){null!=t&&e++})),9===e}var O=n(55),f=n.n(O),y=n(56),k=n.n(y),g=function(t){var e=t.users;return Object(d.jsxs)("div",{className:"textContainer",children:[Object(d.jsx)("div",{}),e?Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"People currently chatting:"}),Object(d.jsx)("div",{className:"activeContainer",children:Object(d.jsx)("h2",{children:e.map((function(t){var e=t.name;return Object(d.jsx)("div",{className:"activeItem",children:e},e)}))})})]}):null]})},N=(n(31),n(32),function(t){Object(o.a)(n,t);var e=Object(i.a)(n);function n(t){var a;Object(s.a)(this,n),(a=e.call(this,t)).setName=function(t){a.setState({name:t})},a.setRoom=function(t){a.setState({room:t})},a.storage=new b,a.handleBoardRestart=function(){a.setState({boxes:Array(9).fill(null),history:[],xIsNext:!0})};return a.state={users:[],name:"",room:"",boxes:Array(9).fill(null),history:[],choice:"X",isMyTurn:!1,opponent:null,isGameEnded:!1},a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=k.a.parse(this.props.location.search),n=e.name,s=e.room;this.socket=f.a.connect("https://intense-fjord-58803.herokuapp.com/",{"force new connection":!0,reconnectionAttempts:"Infinity",timeout:1e4,transports:["websocket"]}),this.setRoom(s),this.setName(n),this.socket.emit("join",{name:n,room:s},(function(t){t&&(window.location.href="/",alert(t))})),this.socket.on("opponent",(function(e){var n=e.opponent,s=e.isMyTurn,a=e.choice;t.setState({opponent:n,isMyTurn:s,choice:a})})),this.socket.on("turn",(function(e){var n=e.boxes,s=e.history;t.setState({boxes:n,history:s,isMyTurn:!t.state.isMyTurn})})),this.socket.on("winner",(function(){t.winner=t.state.name})),this.socket.on("roomData",(function(e){var n=e.users;t.setState({users:n})}))}},{key:"handleBoxClick",value:function(t){var e=this.state.boxes.slice(),n=this.state.history;this.state.isMyTurn&&(p(e)||e[t]||!0!==v(e)&&(e[t]=this.state.choice,n.push(this.state.choice),this.socket.emit("turn",{boxes:e,history:n,id:this.state.opponent.id}),this.setState({boxes:e,history:n,isMyTurn:!this.state.isMyTurn})))}},{key:"render",value:function(){var t=this;this.winner=p(this.state.boxes,this.state.choice,this.state.name,this.state.opponent?this.state.opponent.name:"");var e,n=v(this.state.boxes);return console.log([this.winner,n]),this.state.opponent?this.winner?(e="The Winner is ".concat(this.winner),this.storage.update(["".concat(this.winner," won")])):!this.winner&&n?(e="Game Drawn",this.storage.update(["Game Drawn"])):e="It is ".concat(this.state.isMyTurn?this.state.name:this.state.opponent.name,"'s turn."):e="Waiting For Opponent ...",Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("a",{href:"/Multiplayertictactoe",children:"Go back to scoreboard"}),Object(d.jsxs)("div",{className:"board-wrapper",children:[Object(d.jsxs)("div",{className:"board",children:[Object(d.jsx)("h2",{className:"board-heading",children:e}),Object(d.jsxs)("div",{className:"board-row",children:[Object(d.jsx)(m,{value:this.state.boxes[0],onClick:function(){return t.handleBoxClick(0)}}),Object(d.jsx)(m,{value:this.state.boxes[1],onClick:function(){return t.handleBoxClick(1)}}),Object(d.jsx)(m,{value:this.state.boxes[2],onClick:function(){return t.handleBoxClick(2)}})]}),Object(d.jsxs)("div",{className:"board-row",children:[Object(d.jsx)(m,{value:this.state.boxes[3],onClick:function(){return t.handleBoxClick(3)}}),Object(d.jsx)(m,{value:this.state.boxes[4],onClick:function(){return t.handleBoxClick(4)}}),Object(d.jsx)(m,{value:this.state.boxes[5],onClick:function(){return t.handleBoxClick(5)}})]}),Object(d.jsxs)("div",{className:"board-row",children:[Object(d.jsx)(m,{value:this.state.boxes[6],onClick:function(){return t.handleBoxClick(6)}}),Object(d.jsx)(m,{value:this.state.boxes[7],onClick:function(){return t.handleBoxClick(7)}}),Object(d.jsx)(m,{value:this.state.boxes[8],onClick:function(){return t.handleBoxClick(8)}})]})]}),Object(d.jsxs)("div",{className:"board-history",children:[Object(d.jsx)("h2",{className:"board-heading",children:"Moves history:"}),Object(d.jsxs)("ul",{className:"board-historyList",children:[0===this.state.history.length&&Object(d.jsx)("span",{children:"No moves to show."}),0!==this.state.history.length&&this.state.history.map((function(t,e){return Object(d.jsxs)("li",{children:["Move ",e+1,": ",Object(d.jsx)("strong",{children:t})]},e)}))]})]})]}),Object(d.jsx)(g,{users:this.state.users})]})}}]),n}(r.a.Component)),C=n(33),w=n.n(C),S=n(57),M=function(t){Object(o.a)(n,t);var e=Object(i.a)(n);function n(){var t;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={scoreboard:[],name:"",room:""},t.setName=function(e){t.setState({name:e})},t.setRoom=function(e){t.setState({room:e})},t}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var t=Object(S.a)(w.a.mark((function t(){var e;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(new b).getData();case 2:e=t.sent,this.setState({scoreboard:e});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return Object(d.jsxs)("div",{className:"joinOuterContainer",children:[Object(d.jsxs)("div",{className:"joinInnerContainer",children:[Object(d.jsx)("h1",{className:"heading",children:"Tic-Tac-Toe"}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{placeholder:"Name",className:"joinInput",type:"text",onChange:function(e){return t.setName(e.target.value)}})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{placeholder:"Room",className:"joinInput mt-20",type:"text",onChange:function(e){return t.setRoom(e.target.value)}})}),Object(d.jsx)(u.b,{onClick:function(e){return t.state.name&&t.state.room?null:e.preventDefault()},to:"/board?name=".concat(this.state.name,"&room=").concat(this.state.room),children:Object(d.jsx)("button",{className:"button mt-20",type:"submit",children:"Start Game"})})]}),Object(d.jsxs)("div",{className:"joinInnerContainer",children:[Object(d.jsx)("h1",{className:"heading",children:"Recent Games:"}),Object(d.jsx)("ul",{children:this.state.scoreboard.map((function(t,e){return Object(d.jsx)("li",{className:"score",children:t},e)}))})]})]})}}]),n}(r.a.Component),I=function(t){Object(o.a)(n,t);var e=Object(i.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(d.jsx)("div",{className:"app",children:Object(d.jsxs)(u.a,{basename:"/",children:[Object(d.jsx)(j.a,{exact:!0,path:"/",component:M}),Object(d.jsx)(j.a,{path:"/board",component:N})]})})}}]),n}(r.a.Component);h.a.render(Object(d.jsx)(I,{}),document.getElementById("root"))},21:function(t,e,n){},31:function(t,e,n){},32:function(t,e,n){}},[[106,1,2]]]);
//# sourceMappingURL=main.71407e5a.chunk.js.map